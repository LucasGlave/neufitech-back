const a0_0x53ae35=a0_0x3ff9;(function(_0x30e0da,_0x41fcb3){const _0x55baaf=a0_0x3ff9,_0x2d57c7=_0x30e0da();while(!![]){try{const _0x57769b=-parseInt(_0x55baaf(0x130))/0x1*(-parseInt(_0x55baaf(0x13c))/0x2)+parseInt(_0x55baaf(0x126))/0x3+-parseInt(_0x55baaf(0x139))/0x4*(parseInt(_0x55baaf(0x136))/0x5)+parseInt(_0x55baaf(0x142))/0x6*(parseInt(_0x55baaf(0x124))/0x7)+parseInt(_0x55baaf(0x123))/0x8+parseInt(_0x55baaf(0x12b))/0x9+-parseInt(_0x55baaf(0x132))/0xa;if(_0x57769b===_0x41fcb3)break;else _0x2d57c7['push'](_0x2d57c7['shift']());}catch(_0x4858ff){_0x2d57c7['push'](_0x2d57c7['shift']());}}}(a0_0xbeb7,0x681aa));const express=require(a0_0x53ae35(0x143)),fs=require('fs'),app=express();app[a0_0x53ae35(0x128)](express[a0_0x53ae35(0x11a)]());const fetch=(..._0x492dae)=>import('node-fetch')['then'](({default:_0x5cd918})=>_0x5cd918(..._0x492dae));let responsesStore={};app[a0_0x53ae35(0x112)](a0_0x53ae35(0x117),async(_0x3ea777,_0x32face)=>{const _0x15db68=a0_0x53ae35,{text:_0x11e77d}=_0x3ea777[_0x15db68(0x127)];if(!_0x11e77d)return _0x32face[_0x15db68(0x13e)](0x190)[_0x15db68(0x11a)]({'error':_0x15db68(0x116)});const _0xd5bc62=Math[_0x15db68(0x114)]()[_0x15db68(0x118)](0x24)['substring'](0x7),_0x5b130f=_0x15db68(0x134)+_0x11e77d;try{const _0x1dcb4e=await fetch(_0x15db68(0x131),{'method':_0x15db68(0x13d),'headers':{'Content-Type':_0x15db68(0x120),'Authorization':'Bearer\x20sk-proj-vfon7m7hdhEFT6NBtEJcT3BlbkFJeMy741lBst04EstF2X1M'},'body':JSON[_0x15db68(0x12c)]({'model':_0x15db68(0x12e),'messages':[{'role':_0x15db68(0x122),'content':_0x5b130f}],'temperature':0.7})}),_0x178124=await _0x1dcb4e['json']();if(_0x1dcb4e['ok']){const _0x217f48=_0x178124[_0x15db68(0x11f)][0x0][_0x15db68(0x12d)][_0x15db68(0x135)][_0x15db68(0x13f)]('\x0a')[_0x15db68(0x141)](_0x52eb51=>_0x52eb51[_0x15db68(0x11b)]()!==''),_0x3297cc=_0x217f48[_0x15db68(0x11c)]((_0x5c8407,_0x5f350b)=>({'id':_0xd5bc62+'-'+_0x5f350b,'text':_0x5c8407}));return responsesStore[_0xd5bc62]={'originalText':_0x11e77d,'responses':_0x3297cc,'chosen':null},saveResponsesToFile(),_0x32face[_0x15db68(0x11a)]({'id':_0xd5bc62,'responses':_0x3297cc});}else return _0x32face[_0x15db68(0x13e)](0x1f4)[_0x15db68(0x11a)]({'error':_0x178124['error'][_0x15db68(0x12d)]});}catch(_0x2cdcab){return _0x32face[_0x15db68(0x13e)](0x1f4)['json']({'error':_0x15db68(0x125)});}}),app[a0_0x53ae35(0x112)](a0_0x53ae35(0x129),(_0x54b54b,_0x3d42bd)=>{const _0x2250c6=a0_0x53ae35,{id:_0xb57ece,chosenId:_0xdc8771}=_0x54b54b[_0x2250c6(0x127)];if(responsesStore[_0xb57ece]){const {responses:_0x2944fc,originalText:_0x3af0e6}=responsesStore[_0xb57ece],_0x224712=_0x2944fc[_0x2250c6(0x113)](_0x3e5d4f=>_0x3e5d4f['id']===_0xdc8771);return _0x224712?(responsesStore[_0xb57ece][_0x2250c6(0x138)]=_0x224712[_0x2250c6(0x11e)],saveResponsesToFile(),_0x3d42bd[_0x2250c6(0x11a)]({'message':_0x2250c6(0x119),'originalText':_0x3af0e6,'chosenResponse':_0x224712[_0x2250c6(0x11e)]})):_0x3d42bd[_0x2250c6(0x13e)](0x190)['json']({'error':_0x2250c6(0x140)});}else return _0x3d42bd[_0x2250c6(0x13e)](0x194)[_0x2250c6(0x11a)]({'error':_0x2250c6(0x12a)});}),app['get'](a0_0x53ae35(0x115),(_0x15d7f4,_0x21ba91)=>{return _0x21ba91['json'](responsesStore);});function saveResponsesToFile(){const _0x27860e=a0_0x53ae35;fs['writeFileSync']('responses.json',JSON[_0x27860e(0x12c)](responsesStore,null,0x2),_0x27860e(0x11d));}function a0_0x3ff9(_0x132675,_0x340997){const _0xbeb7c6=a0_0xbeb7();return a0_0x3ff9=function(_0x3ff9c3,_0x584ba4){_0x3ff9c3=_0x3ff9c3-0x111;let _0x43a3d9=_0xbeb7c6[_0x3ff9c3];return _0x43a3d9;},a0_0x3ff9(_0x132675,_0x340997);}function a0_0xbeb7(){const _0x313916=['content','25KJANjP','env','chosen','635636mwOjPJ','readFileSync','listen','902618LYxFMw','POST','status','split','El\x20ID\x20de\x20la\x20respuesta\x20elegida\x20no\x20es\x20válido','filter','6AzgcaO','express','responses.json','existsSync','post','find','random','/api/get-all','Se\x20requiere\x20un\x20texto','/api/generate-responses','toString','Respuesta\x20elegida\x20guardada\x20con\x20éxito','json','trim','map','utf-8','text','choices','application/json','PORT','user','6542656XhswjA','1848581qzMrtc','Error\x20al\x20comunicarse\x20con\x20OpenAI','1501146uRiTcw','body','use','/api/save-response','ID\x20no\x20encontrado','6366096qfwgDO','stringify','message','gpt-4o-mini','log','1bzRfnH','https://api.openai.com/v1/chat/completions','15199950cLHWOx','Server\x20is\x20running\x20on\x20port\x20','Da\x20tres\x20respuestas\x20de\x20texto\x20al\x20mensaje,\x20como\x20si\x20fueras\x20una\x20persona\x20paralizada\x20y\x20sin\x20poder\x20hablar.\x20\x0aEjemplo:\x20si\x20el\x20mensaje\x20es\x20\x22buen\x20día\x22;\x20tres\x20posibles\x20respuestas\x20serían:\x20\x0a1)\x20\x22Buen\x20día\x22;\x202)\x20\x22Hola\x22;\x203)\x20\x22¿Cómo\x20estás?\x22.\x20\x0aEl\x20mensaje\x20que\x20recibas\x20es\x20una\x20transcripción\x20a\x20texto\x20de\x20un\x20audio\x20del\x20interlocutor\x20y\x20debes\x20reconocer\x20si\x20es\x20una\x20pregunta\x20o\x20una\x20afirmación,\x0apara\x20generar\x20las\x20respuestas\x20adecuadas.\x20El\x20mensaje\x20es:\x20'];a0_0xbeb7=function(){return _0x313916;};return a0_0xbeb7();}function loadResponsesFromFile(){const _0x2e8bf7=a0_0x53ae35;if(fs[_0x2e8bf7(0x111)](_0x2e8bf7(0x144))){const _0x15831b=fs[_0x2e8bf7(0x13a)]('responses.json','utf-8');responsesStore=JSON['parse'](_0x15831b);}}const port=process[a0_0x53ae35(0x137)][a0_0x53ae35(0x121)]||0xbb8;app[a0_0x53ae35(0x13b)](port,()=>{const _0x35715a=a0_0x53ae35;console[_0x35715a(0x12f)](_0x35715a(0x133)+port),loadResponsesFromFile();});